{% extends "base.html" %}
{% block content %}
<div class="container my-5">
    <h3>Incident Analysis Results</h3>

    {% for incident in incidents %}
    <div class="card my-4">
        <div class="card-header">
            <h5 class="mb-0">{{ incident.title }} <small class="text-muted">({{ incident.incident_id }})</small></h5>
        </div>
        <div class="card-body">
            {% if incident.artefacts.all %}
            <ul class="list-group">
                {% for artefact in incident.artefacts.all %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ artefact.name }}
                    <a href="{% url 'analysis:artefact_result' artefact.id %}" class="btn btn-sm btn-outline-secondary">
                        View Result
                    </a>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-muted">No artefacts uploaded for this incident.</p>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p class="text-muted">No incidents assigned to you yet.</p>
    {% endfor %}
</div>
{% endblock %}
